# paqet Client Configuration Example
# Role must be explicitly set
role: "client"

# Logging configuration
log:
  level: "info"  # none, debug, info, warn, error, fatal

# Network interface settings
network:
  interface: "en0"                          # CHANGE ME: Network interface (en0, eth0, wlan0, etc.)
  driver: "pcap"   # Driver: "pcap" (default), "ebpf" (Linux XDP, fastest)
  # guid: "\Device\NPF_{...}"               # Windows only (Npcap).

  # IPv4 configuration
  ipv4:
    addr: "192.168.1.100:0"                 # CHANGE ME: Local IP (use port 0 for random port)
    router_mac: "aa:bb:cc:dd:ee:ff"         # CHANGE ME: Gateway/router MAC address

  # IPv6 configuration (optional)
  ipv6:
    addr: "[2001:db8::1]:0"                 # CHANGE ME: Local IPv6 address and port (optional)
    router_mac: "aa:bb:cc:dd:ee:ff"         # CHANGE ME: Gateway/router MAC address for IPv6

  tcp:
    local_flag: ["PA"]                      # Local TCP flags (Push+Ack default)
    remote_flag: ["PA"]                     # Remote TCP flags (Push+Ack default)

  # PCAP settings (optional - will use defaults)
  # pcap:
    # sockbuf: 4194304                        # 4MB buffer (default for client)



# Servers configuration
# Define multiple servers, each with its own SOCKS5 and forwarding rules.
servers:
  - server:
      addr: "10.0.0.100:9999"   # CHANGE ME: First server address
                                # NOTE: If hopping is enabled, this port is ignored for transport
                                # and the hopping range is used instead.
    
      # Port Hopping Configuration (Optional)
      # Periodically changes the destination port to evade detection on fixed ports.
      # The server must be configured with the same range.

      hopping:
        enabled: false      # Enable port hopping
        interval: 15        # Interval in seconds to change ports
        ports:              # List of single ports or ranges
          - "80"
          - "10000-20000"   # Recommended: 10000-20000 (Avoids OS ephemeral ports 32768+)
      
      # Obfuscation Configuration (Optional)
      obfuscation:
        use_tls: false      # NOT RECOMMENDED: Mimics HTTPS but lacks handshake. Use padding instead.
        padding:
          enabled: true    # Enable random padding
          min: 32           # Minimum padding bytes
          max: 64           # Maximum padding bytes
        headers:
          randomize_tos: true
          randomize_ttl: true
          randomize_window: true

      socks5:
        - listen: "127.0.0.1:1080"
          username: ""
          password: ""
    # forward:
    #   - listen: "127.0.0.1:8080"
    #     target: "127.0.0.1:80"
    #     protocol: "tcp"
    
    # Transport protocol configuration for this server
    transport:
      protocol: "kcp"  # Transport protocol (currently only "kcp" supported)
      conn: 1          # Number of connections (1-256, default: 1)
      
      # tcpbuf: 8192   # TCP buffer size in bytes
      # udpbuf: 4096   # UDP buffer size in bytes

      # KCP protocol settings
      kcp:
        mode: "fast"              # KCP mode: normal, fast, fast2, fast3, manual
                                  # - normal: nodelay=0, interval=40, resend=2, nocongestion=1
                                  # - fast:   nodelay=1, interval=30, resend=2, nocongestion=1
                                  # - fast2:  nodelay=1, interval=20, resend=2, nocongestion=1
                                  # - fast3:  nodelay=1, interval=10, resend=2, nocongestion=1
                                  # - manual: use parameters below

        # Manual mode parameters (only used when mode="manual")
        # nodelay: 1              # 0=disable, 1=enable
                                  # Enable for lower latency & aggressive retransmission
                                  # Disable for TCP-like conservative behavior
                      
        # interval: 10            # Internal update timer interval in milliseconds (10-5000ms)
                                  # Lower values increase responsiveness but raise CPU usage

        # resend: 2               # Fast retransmit trigger (0-2)
                                  # 0 = disabled (wait for timeout only)
                                  # 1 = most aggressive (retransmit after 1 ACK skip)
                                  # 2 = aggressive (retransmit after 2 ACK skips)

        # nocongestion: 1         # Congestion control: 0=enabled, 1=disabled
                                  # 0 = TCP-like fair congestion control (slow start, congestion avoidance)
                                  # 1 = disable congestion control for maximum speed

        # wdelay: false           # Write batching behavior
                                  # false = flush immediately (low latency, recommended for real-time)
                                  # true = batch writes until next update interval (higher throughput)
                                  # Controls when data is actually sent to the network

        # acknodelay: true        # ACK sending behavior
                                  # true = send ACKs immediately when packets are received (lower latency)
                                  # false = batch ACKs (more bandwidth efficient)
                                  # Setting true reduces latency but increases bandwidth usage

        # mtu: 1350              # Maximum transmission unit (50-1500)
        # rcvwnd: 512            # Receive window size (default for client)  
        # sndwnd: 512            # Send window size (default for client)

        # Encryption settings
        # block: "aes"                    # Encryption: aes, aes-128, aes-128-gcm, aes-192, salsa20, blowfish, twofish, cast5, 3des, tea, xtea, xor, sm4, none, null.
        key: "your-secret-key-here"       # CHANGE ME: Secret key (must match server)

        # Buffer settings (optional)
        # smuxbuf: 4194304       # 4MB SMUX buffer
        # streambuf: 2097152     # 2MB stream buffer

  # - server:
  #     addr: "10.0.0.101:9999"    # Second server
  #   socks5:
  #     - listen: "127.0.0.1:1081" # CHANGE ME: Must be different from the first server's SOCKS port!
  #   transport: ...


# Optional Forward Error Correction (FEC) - currently disabled
# Use these only if you need FEC for very lossy networks:
#   dshard: 10    # Data shards for FEC
#   pshard: 3     # Parity shards for FEC